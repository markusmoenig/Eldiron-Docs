"use strict";(self.webpackChunkeldiron_docs=self.webpackChunkeldiron_docs||[]).push([[5049],{8067:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"reference/scripting_server","title":"Scripting: Server","description":"Commands","source":"@site/docs/reference/scripting_server.md","sourceDirName":"reference","slug":"/reference/scripting_server","permalink":"/docs/reference/scripting_server","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Scripting: Server","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Scripting: Client","permalink":"/docs/reference/scripting_client"},"next":{"title":"Screens and Widgets","permalink":"/docs/reference/screens_widgets"}}');var i=s(4848),r=s(8453);const c={title:"Scripting: Server",sidebar_position:5},d=void 0,a={},l=[{value:"Commands",id:"commands",level:2},{value:"<code>add_item</code>",id:"add_item",level:2},{value:"<code>block_events</code>",id:"block_events",level:2},{value:"<code>deal_damage</code>",id:"deal_damage",level:2},{value:"<code>debug</code>",id:"debug",level:2},{value:"<code>drop_items</code>",id:"drop_items",level:2},{value:"<code>entities_in_radius</code>",id:"entities_in_radius",level:2},{value:"<code>equip</code>",id:"equip",level:2},{value:"<code>get_attr</code>",id:"get_attr",level:2},{value:"<code>get_entity_attr</code>",id:"get_entity_attr",level:2},{value:"<code>get_item_attr</code>",id:"get_item_attr",level:2},{value:"<code>get_sector_name</code>",id:"get_sector_name",level:2},{value:"<code>inventory_items</code>",id:"inventory_items",level:2},{value:"<code>inventory_items_of</code>",id:"inventory_items_of",level:2},{value:"<code>message</code>",id:"message",level:2},{value:"<code>notify_in</code>",id:"notify_in",level:2},{value:"<code>random_walk</code>",id:"random_walk",level:2},{value:"<code>random_walk_in_sector</code>",id:"random_walk_in_sector",level:2},{value:"<code>set_attr</code>",id:"set_attr",level:2},{value:"<code>set_emit_light</code>",id:"set_emit_light",level:2},{value:"<code>set_proximity_tracking</code>",id:"set_proximity_tracking",level:2},{value:"<code>take</code>",id:"take",level:2},{value:"<code>teleport</code>",id:"teleport",level:2}];function o(e){const n={a:"a",br:"br",code:"code",em:"em",h2:"h2",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"commands",children:"Commands"}),"\n",(0,i.jsxs)(n.p,{children:["This chapter lists all available scripting ",(0,i.jsx)(n.strong,{children:"commands"})," for Eldiron, used in ",(0,i.jsx)(n.a,{href:"/docs/creator/characters",children:"Characters"})," and ",(0,i.jsx)(n.a,{href:"/docs/creator/items",children:"Items"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"add_item",children:(0,i.jsx)(n.code,{children:"add_item"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Creates a new item of the given class and adds it to the character\u2019s inventory.",(0,i.jsx)(n.br,{}),"\n","Returns the item ID or ",(0,i.jsx)(n.code,{children:"-1"})," on failure."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'add_item("class_name")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"block_events",children:(0,i.jsx)(n.code,{children:"block_events"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Blocks the listed events from being sent to the character or item for a number of in-game minutes."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'block_events(minutes, "event1", "event2", ...)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"deal_damage",children:(0,i.jsx)(n.code,{children:"deal_damage"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsxs)(n.p,{children:["Deals damage to an entity or item. Sends a ",(0,i.jsx)(n.code,{children:"take_damage"})," event to the receiver with the given dictionary."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'deal_damage(entity_id | item_id, {"physical": 10})\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"debug",children:(0,i.jsx)(n.code,{children:"debug"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Sends a debug message to the log."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"debug(arg1, arg2, ...)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"drop_items",children:(0,i.jsx)(n.code,{children:"drop_items"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Drops items from the character's inventory.",(0,i.jsx)(n.br,{}),"\n","If a ",(0,i.jsx)(n.code,{children:"filter_string"})," is provided, only matching items are dropped."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"drop_items(filter_string)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"entities_in_radius",children:(0,i.jsx)(n.code,{children:"entities_in_radius"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Returns a list of nearby entity IDs within radius."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"entities_in_radius()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"equip",children:(0,i.jsx)(n.code,{children:"equip"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Equips an item from the character\u2019s inventory to its slot.",(0,i.jsx)(n.br,{}),"\n","Returns ",(0,i.jsx)(n.code,{children:"True"})," on success or ",(0,i.jsx)(n.code,{children:"False"})," on failure."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"equip(item_id)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"get_attr",children:(0,i.jsx)(n.code,{children:"get_attr"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Gets an attribute of the current character or item."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'get_attr("key")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"get_entity_attr",children:(0,i.jsx)(n.code,{children:"get_entity_attr"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Gets an attribute from another entity."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'get_entity_attr(entity_id, "key")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"get_item_attr",children:(0,i.jsx)(n.code,{children:"get_item_attr"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Gets an attribute from an item."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'get_item_attr(item_id, "key")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"get_sector_name",children:(0,i.jsx)(n.code,{children:"get_sector_name"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Returns the name of the sector the character or item is currently in."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"get_sector_name()\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"inventory_items",children:(0,i.jsx)(n.code,{children:"inventory_items"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Returns a list of item IDs in the character\u2019s inventory.",(0,i.jsx)(n.br,{}),"\n","If a ",(0,i.jsx)(n.code,{children:"filter_string"})," is provided, only matching items are returned."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"inventory_items(filter_string)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"inventory_items_of",children:(0,i.jsx)(n.code,{children:"inventory_items_of"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsxs)(n.p,{children:["Returns a list of item IDs in another entity\u2019s inventory.",(0,i.jsx)(n.br,{}),"\n","If a ",(0,i.jsx)(n.code,{children:"filter_string"})," is provided, only matching items are returned."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"inventory_items_of(entity_id, filter_string)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"message",children:(0,i.jsx)(n.code,{children:"message"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsxs)(n.p,{children:["Sends a message to a given character.",(0,i.jsx)(n.br,{}),"\n","An optional category can be used for UI coloring."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'message(entity_id, "message", "optional_category")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"notify_in",children:(0,i.jsx)(n.code,{children:"notify_in"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Schedules an event to be sent after a given number of in-game minutes."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'notify_in(minutes, "event_name")\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"random_walk",children:(0,i.jsx)(n.code,{children:"random_walk"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Moves the character in a random direction for the given distance and speed.",(0,i.jsx)(n.br,{}),"\n","Sleeps after each move for a random time up to ",(0,i.jsx)(n.code,{children:"max_sleep"})," in in-game minutes."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"random_walk(distance, speed, max_sleep)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"random_walk_in_sector",children:(0,i.jsx)(n.code,{children:"random_walk_in_sector"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Similar to ",(0,i.jsx)(n.code,{children:"random_walk"}),", but restricted to the current sector."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"random_walk_in_sector(distance, speed, max_sleep)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"set_attr",children:(0,i.jsx)(n.code,{children:"set_attr"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsx)(n.p,{children:"Sets an attribute on the current character or item."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'set_attr("key", value)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"set_emit_light",children:(0,i.jsx)(n.code,{children:"set_emit_light"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsxs)(n.p,{children:["Enables / disables light emittance for entities and items. Items should do this as part of their state, see the ",(0,i.jsx)(n.a,{href:"/docs/reference/events#active",children:"active event"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Light parameters need to be set up with the ",(0,i.jsx)(n.a,{href:"/docs/reference/attributes#emitting-light",children:"light attributes"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'    def event(self, event, value):\n        if event == "active":\n            set_emit_light(value)\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"set_proximity_tracking",children:(0,i.jsx)(n.code,{children:"set_proximity_tracking"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can be used with both characters and items."})}),"\n",(0,i.jsxs)(n.p,{children:["Enables or disables proximity tracking.",(0,i.jsx)(n.br,{}),"\n","If enabled, proximity events will be received for nearby entities within the given radius."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"set_proximity_tracking(True or False, radius)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"take",children:(0,i.jsx)(n.code,{children:"take"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Takes an item from the region and adds it to the character\u2019s inventory.",(0,i.jsx)(n.br,{}),"\n","Returns ",(0,i.jsx)(n.code,{children:"True"})," on success or ",(0,i.jsx)(n.code,{children:"False"})," if the inventory is full."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"take(item_id)\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"teleport",children:(0,i.jsx)(n.code,{children:"teleport"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"This command can only be used with characters."})}),"\n",(0,i.jsxs)(n.p,{children:["Teleports the character to a named sector, the second parameter is optional and names the region to teleport to. If only the sector name is given ",(0,i.jsx)(n.code,{children:"teleport"})," will search for the sector in the current region."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'teleport("Entrance", "Deadly Dungeon")\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var t=s(6540);const i={},r=t.createContext(i);function c(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);