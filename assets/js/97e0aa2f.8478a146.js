"use strict";(self.webpackChunkeldiron_docs=self.webpackChunkeldiron_docs||[]).push([[910],{4275:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"scripting_data/exmples","title":"Examples","description":"Opening a Door","source":"@site/docs/scripting_data/exmples.md","sourceDirName":"scripting_data","slug":"/scripting_data/exmples","permalink":"/docs/scripting_data/exmples","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Examples","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Reference","permalink":"/docs/scripting_data/reference"},"next":{"title":"Screens and Widgets","permalink":"/docs/screens_widgets"}}');var t=s(4848),r=s(8453);const o={title:"Examples",sidebar_position:2},l=void 0,c={},d=[{value:"Opening a Door",id:"opening-a-door",level:2},{value:"<strong>Example: Auto-Opening Door</strong>",id:"example-auto-opening-door",level:3},{value:"<strong>How It Works</strong>",id:"how-it-works",level:3},{value:"Opening a Locked Gate",id:"opening-a-locked-gate",level:2},{value:"<strong>How It Works</strong>",id:"how-it-works-1",level:3}];function a(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"opening-a-door",children:"Opening a Door"}),"\n",(0,t.jsxs)(n.p,{children:["Opening a door can be achieved in different ways depending on your ",(0,t.jsx)(n.strong,{children:"gameplay mechanics"}),". For example, you could open a door when:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A character ",(0,t.jsx)(n.strong,{children:"bumps into it"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The player ",(0,t.jsx)(n.strong,{children:'clicks a "Use" or "Open" button'}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Let's start with the ",(0,t.jsx)(n.strong,{children:"simplest approach"}),": opening a door when a character ",(0,t.jsx)(n.strong,{children:"bumps into it"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"example-auto-opening-door",children:(0,t.jsx)(n.strong,{children:"Example: Auto-Opening Door"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Taken from https://github.com/markusmoenig/Eldiron/blob/master/examples/Harbor.eldiron\n\nclass Door:\n\n    def event(self, event, value):\n\n        if event == "bumped_by_entity":\n            set_attr("visible", False)\n            set_attr("blocking", False)\n            notify_in(2, "close_door")\n\n        if event == "close_door":\n            if len(entities_in_radius()) == 0:\n                set_attr("visible", True)\n                set_attr("blocking", True)\n            else:\n                notify_in(2, "close_door")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works",children:(0,t.jsx)(n.strong,{children:"How It Works"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["When a character ",(0,t.jsx)(n.strong,{children:"bumps into the door"}),", the ",(0,t.jsx)(n.code,{children:"bumped_by_entity"})," event is triggered."]}),"\n",(0,t.jsxs)(n.li,{children:["The door ",(0,t.jsx)(n.strong,{children:"opens"})," by setting:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"visible = False"})," (door disappears)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"blocking = False"})," (door no longer blocks movement)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:'notify_in(2, "close_door")'})," function ",(0,t.jsx)(n.strong,{children:"delays closing"})," the door for ",(0,t.jsx)(n.strong,{children:"2 seconds"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["When ",(0,t.jsx)(n.code,{children:"close_door"})," is triggered, the script:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Checks if the area is empty"})," (",(0,t.jsx)(n.code,{children:"entities_in_radius() == 0"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.strong,{children:"empty"}),", the door ",(0,t.jsx)(n.strong,{children:"closes"})," (",(0,t.jsx)(n.code,{children:"visible = True"}),", ",(0,t.jsx)(n.code,{children:"blocking = True"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.strong,{children:"not empty"}),", it ",(0,t.jsx)(n.strong,{children:"delays the closing"})," again by 2 seconds."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Setting the ",(0,t.jsx)(n.code,{children:"blocking"})," attribute isn\u2019t strictly necessary in this case, since the door ",(0,t.jsx)(n.strong,{children:"instantly opens"})," on contact. However, it is included here for ",(0,t.jsx)(n.strong,{children:"clarity and flexibility"})," in different scenarios."]})}),"\n",(0,t.jsx)(n.h2,{id:"opening-a-locked-gate",children:"Opening a Locked Gate"}),"\n",(0,t.jsxs)(n.p,{children:["Opening a ",(0,t.jsx)(n.strong,{children:"locked gate"})," works similarly to opening a ",(0,t.jsx)(n.strong,{children:"door"}),", but with one key difference:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The gate ",(0,t.jsx)(n.strong,{children:"requires a key"})," to open."]}),"\n",(0,t.jsxs)(n.li,{children:["On the ",(0,t.jsx)(n.code,{children:"bumped_by_entity"})," event, the script checks if the ",(0,t.jsx)(n.strong,{children:"character has the correct key"})," in their inventory."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# Taken from https://github.com/markusmoenig/Eldiron/blob/master/examples/Harbor.eldiron\n\nclass Gate:\n\n    def event(self, event, value):\n        if event == "bumped_by_entity":\n            if len(inventory_items_of(value, "Golden Key")) > 0:\n                set_attr("visible", False)\n                set_attr("blocking", False)\n                notify_in(2, "close_gate")\n        if event == "close_gate":\n            if len(entities_in_radius()) == 0:\n                set_attr("visible", True)\n                set_attr("blocking", True)\n            else:\n                notify_in(2, "close_gate")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works-1",children:(0,t.jsx)(n.strong,{children:"How It Works"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["When a character ",(0,t.jsx)(n.strong,{children:"bumps into the gate"}),", the ",(0,t.jsx)(n.code,{children:"bumped_by_entity"})," event is triggered."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"value"})," parameter contains the ",(0,t.jsx)(n.strong,{children:"ID of the character"})," that bumped into the gate."]}),"\n",(0,t.jsxs)(n.li,{children:["The script checks if that character ",(0,t.jsx)(n.strong,{children:'has a "Golden Key"'})," in their inventory using:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:'inventory_items_of(value, "Golden Key") > 0'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["If the character ",(0,t.jsx)(n.strong,{children:"has the key"}),", the gate ",(0,t.jsx)(n.strong,{children:"opens"})," by setting:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"visible = False"})," (gate disappears)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"blocking = False"})," (gate no longer blocks movement)."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:'notify_in(2, "close_gate")'})," function ",(0,t.jsx)(n.strong,{children:"delays closing"})," the gate for ",(0,t.jsx)(n.strong,{children:"2 seconds"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["When ",(0,t.jsx)(n.code,{children:"close_gate"})," is triggered, the script:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Checks if the area is empty"})," (",(0,t.jsx)(n.code,{children:"entities_in_radius() == 0"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.strong,{children:"empty"}),", the gate ",(0,t.jsx)(n.strong,{children:"closes"})," (",(0,t.jsx)(n.code,{children:"visible = True"}),", ",(0,t.jsx)(n.code,{children:"blocking = True"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.strong,{children:"not empty"}),", it ",(0,t.jsx)(n.strong,{children:"delays closing"})," again by ",(0,t.jsx)(n.strong,{children:"2 seconds"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"value"})," parameter in ",(0,t.jsx)(n.code,{children:"bumped_by_entity"})," holds the ",(0,t.jsx)(n.strong,{children:"ID of the character"})," who collided with the gate.\nWe pass this ID to ",(0,t.jsx)(n.code,{children:'inventory_items_of(value, "Golden Key")'})," to ",(0,t.jsx)(n.strong,{children:"check that specific character's inventory"}),".\nThis script can be adapted to check for ",(0,t.jsx)(n.strong,{children:"different key types"})," by replacing ",(0,t.jsx)(n.code,{children:'"Golden Key"'})," with another item name."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);